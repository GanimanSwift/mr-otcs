Times are converted to your local time zone: <div id="timezone"></div>

<br /><br />
<div id="previouslyon"></div>

Now playing: <br />
<div id="nowplaying"></div>
<br />

Coming up next: <br />
<div id="comingupnext"></div>

<p>Generated by Mr. OTCS.</p>

<script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1,npm/dayjs@1/plugin/timezone.min.js,npm/dayjs@1/plugin/utc.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script>

<script>
    dayjs.extend(window.dayjs_plugin_utc);
    dayjs.extend(window.dayjs_plugin_timezone);
    dayjs.extend(window.dayjs_plugin_localizedFormat);
    var timezone = dayjs.tz.guess();
    var offset = dayjs().utcOffset();
    document.getElementById("timezone").innerHTML = timezone;

    var previous_file = "<strong>{previous_file}</strong>";

    // Array formatted from coming_up_next[][] in Python script.
    var imported_array = {js_array};

    // Populate times with starting times and names of upcoming videos.
    var times = imported_array.map(function(i) {{
        var time = new dayjs.utc(i.time).utcOffset(offset).format('LT');
        return [
            '<div class="gridtime">', time, '</div>',
            '<div class="gridname"><strong>', i.name, '</strong></div>',
            '<br />',
        ].join('')
    }});

    // Only write "Previously" line if previous_file information was passed in.
    if (previous_file != "") {{
        document.getElementById("previouslyon").innerHTML = "Previously: " + previous_file + "<br /><br />";
    }};

    document.getElementById("nowplaying").innerHTML = times[0];
    document.getElementById("comingupnext").innerHTML = times.slice(1).join("");
</script>
